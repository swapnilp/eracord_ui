<div style="margin:20px 0;">
  <span ng-if="!showOptions">
    <span is-role-visible='["manage_roll_number"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/manage_student_rollnumber" class="btn btn-primary" ng-if="classId">Manage Roll Number</a>
    </span>
    <span is-role-visible='["manage_class_student"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/assign_students" class="btn btn-primary" ng-if="classId">Assign Student</a>
    </span>
    <span is-role-visible='["manage_student_subject"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/manage_student_subjects" class="btn btn-primary" ng-if="classId">manage_student_subjects</a>
    </span>
    <span is-role-visible='["add_student"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/students/new" class="btn btn-primary" ng-if="classId"> New Student</a>
    </span>
    <span ng-if="classId">
      <a href="{{hostUrl}}/classes/{{classId}}/download_excel.xlsx?&authorization_token={{token}}" class="btn btn-primary" ng-if="classId" target="_blank"> Download Students or excel format</a>
    </span>
    <span class=" paddingTop10 " style="display:block;" ng-if="classId">
      <form name="form">
	<div class="btn btn-primary" ngf-select ng-model="file" name="file" ngf-pattern="'.xlsx,.xls'"
	     accept=".xlsx,.xls" ngf-max-size="20MB" ng-change="selectUploadFile(file);">Select File</div>
	<span>{{fileName}}</span>
	<span ng-class="uploadMeaasgeClass" ng-if="uploadingFile">{{uploadingMessage}}</span>
	<button type="submit" ng-click="submit()" ng-if="!uploadingFile" class="btn btn-default" ng-disabled="requestLoading">Upload</button>
      </form>
    </span>
  </span>
  <div class="examFilterDiv col-sm-12"> 
    <div class="col-sm-3">
      Filter : <input type="text" ng-model="filterStudent" dl-key-code="pageChanged(1);" code="13" placeholder="Type name or mobile and  enter" style="max-width:230px;" value="{{filterStudent}}">

    </div>
    <div class="col-sm-3" ng-if="isFilter">
      <select class="form-control ng-touched" ng-model="filterClass" ng-options="cls.id as cls.name for cls in classes">
	<option value="">All</option>
      </select>
    </div>
    <div class="col-sm-3">
      <button class="btn btn-primary" ng-click="pageChanged(1);">Filter</button>
    </div>		  
  </div>
  <div class="col-sm-12" style="padding-bottom:20px;" is-role-visible='["accountant", "accountant_clark"]' email="currentUser.email">
    <a class="btn btn-primary" href="#/students/new">New Student</a>
  </div>
  <br /><br /><br />
  <div class="alert alert-warning col-sm-12">
    <span ng-if="totalStudents > 0">
      Total Students are - {{totalStudents}}
    </span>
    <span ng-if="totalStudents === 0">
      No data found
    </span>
  </div>
  <div request-loading is-loading="requestLoading"></div>
  <figure class="highlight col-sm-12" ng-show="!requestLoading && totalStudents > 0">
    <table st-table="rowCollection" class="table organisationCoursesTable">
      <thead>
	<tr>
	  <th st-sort="firstName" ng-if="!isRollNumber">Number</th>
	  <th st-sort="firstName" ng-if="isRollNumber">Roll Number</th>
	  <th st-sort="lastName">Name</th>
	  <th st-sort="balance">Batch</th>
	  <th st-sort="balance">Standard</th>
	  <th st-sort="balance">Enable Sms</th>
	  <th st-sort="balance" ng-if="!isRemove">Classes</th>
	  <th ng-if="isRemove">Remove</th>
	</tr>
      </thead>
      <tbody>
	<tr dir-paginate-start="row in students | toArray:false | itemsPerPage: 10" total-items="totalStudents" current-page="pagination.current" pagination-id="student" ng-click="openInfo(row);" class="pointer">
	  <td><span ng-if="showRollNumber">{{ row.roll_number}}</span><span ng-if="!showRollNumber">{{ $index+1 + ((pagination.current - 1) * 10)}}</span></td>
	  <td><span>{{row.name}}</span></td>
	  <td>{{row.batch}}</td>
	  <td>{{row.standard}}</td>
	  <td>{{row.enable_sms}}</td>
	  <td ng-if="!isRemove">{{row.class_names}}</td>
	  <td ng-if="isRemove">
	    <button ng-click="removeStudent(row)" class="btn btn-link">Remove</button>
	  </td>
	</tr>
	<tr ng-if="row.expanded" dir-paginate-end="" class="noBorder alert alert-warning">
	  <td></td>
          <td colspan="5">
	    <span>Parent Name - {{row.parent_name}} </span>
	    <br />
	    <span>Mobile - {{row.p_mobile}}</span>
	    <br />
	    <a href="#/students/{{row.id}}/show" class="btn btn-primary">Show</a>
	    <a class="btn btn-primary" href="#/students/{{row.id}}/payment_info" ng-if="has_show_pay_info">Payment Info</a>
	    <a class="btn btn-primary" href="#/students/{{row.id}}/pay_fee" ng-if="has_pay_fee">Pay Fee</a>
	  </td>
        </tr>
      </tbody>
    </table>
  </figure>
  <dir-pagination-controls on-page-change="pageChanged(newPageNumber)" pagination-id="student" ng-show="totalStudents > 9"></dir-pagination-controls>
</div>

