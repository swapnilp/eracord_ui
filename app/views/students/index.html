<div style="margin:20px 0;">
  <span ng-if="!showOptions">
    <span is-role-visible='["manage_roll_number"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/manage_student_rollnumber" class="btn btn-primary" ng-if="classId">Manage Roll Number</a>
    </span>
    <span is-role-visible='["manage_class_student"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/assign_students" class="btn btn-primary" ng-if="classId">Assign Student</a>
    </span>
    <span is-role-visible='["manage_student_subject"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/manage_student_subjects" class="btn btn-primary" ng-if="classId">manage_student_subjects</a>
    </span>
    <span is-role-visible='["add_student"]' email="currentUser.email">
      <a href="#/classes/{{classId}}/students/new" class="btn btn-primary" ng-if="classId"> New Student</a>
    </span>
    <span ng-if="classId">
      <a href="{{hostUrl}}/classes/{{classId}}/download_excel.xlsx?&authorization_token={{token}}" class="btn btn-primary" ng-if="classId" target="_blank"> Download Students or excel format</a>
    </span>
    <span class=" paddingTop10 " style="display:block;" ng-if="classId">
      <form name="form">
	<div class="btn btn-primary" ngf-select ng-model="file" name="file" ngf-pattern="'.xlsx,.xls'"
	     accept=".xlsx,.xls" ngf-max-size="20MB" ng-change="selectUploadFile(file);">Select File</div>
	<span>{{fileName}}</span>
	<span ng-class="uploadMeaasgeClass" ng-if="uploadingFile">{{uploadingMessage}}</span>
	<button type="submit" ng-click="submit()" ng-if="!uploadingFile" class="btn btn-default" ng-disabled="requestLoading">Upload</button>
      </form>
    </span>
  </span>
  <div class="examFilterDiv col-sm-12 "> 
    Filter : <input type="text" ng-model="filterStudent" dl-key-code="pageChanged(1);" code="13" placeholder="Type name or mobile and  enter" style="width:230px;">
      <button class="btn btn-primary" ng-click="pageChanged(1);">Filter</button>
  </div>
  <br /><br /><br />
  <div class="alert alert-warning col-sm-12">
    <span ng-if="totalStudents > 0">
      Total Students are - {{totalStudents}}
    </span>
    <span ng-if="totalStudents === 0">
      No data found
    </span>
  </div>
  <div request-loading is-loading="requestLoading"></div>
  <table st-table="rowCollection" class="table organisationCoursesTable" ng-show="!requestLoading && totalStudents > 0">
    <thead>
      <tr>
	<th st-sort="firstName" ng-if="!isRollNumber">Number</th>
	<th st-sort="firstName" ng-if="isRollNumber">Roll Number</th>
	<th st-sort="lastName">Name</th>
	<th st-sort="balance">Batch</th>
	<th st-sort="balance">Standard</th>
	<th st-sort="balance">Parent Name</th>
	<th st-sort="balance">Parent Mobile</th>
	<th st-sort="balance">Enable Sms</th>
	<th st-sort="balance" ng-if="!isRemove">Classes</th>
	<th></th>
	<th ng-if="isRemove">Remove</th>
      </tr>
    </thead>
    <tbody>
      <tr dir-paginate="row in students | toArray:false | itemsPerPage: 10" total-items="totalStudents" current-page="pagination.current" pagination-id="student">
	<td><span ng-if="showRollNumber">{{ row.roll_number}}</span><span ng-if="!showRollNumber">{{ $index+1 + ((pagination.current - 1) * 10)}}</span></td>
	<td>{{row.name}}</td>
	<td>{{row.batch}}</td>
	<td>{{row.standard}}</td>
	<td>{{row.parent_name}}</td>
	<td>{{row.p_mobile}}</td>
	<td>{{row.enable_sms}}</td>
	<td ng-if="!isRemove">{{row.class_names}}</td>
	<td>
	  <a href="#/students/{{row.id}}/show" class="btn btn-link">Show</a>
	</td>
	<td ng-if="isRemove">
	  <button ng-click="removeStudent(row)" class="btn btn-link">Remove</button>
	</td>
      </tr>
    </tbody>
  </table>
  <dir-pagination-controls on-page-change="pageChanged(newPageNumber)" pagination-id="student" ng-show="totalStudents > 9"></dir-pagination-controls>
</div>

